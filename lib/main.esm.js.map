{"version":3,"file":"main.esm.js","sources":["../src/main.ts"],"sourcesContent":["type LocalStorageItem = {\r\n    data: any,\r\n    expiry: number | null\r\n};\r\n\r\nexport class LocalStorage {\r\n    /**\r\n     * Default item validity period in seconds.\r\n     *\r\n     * @type { number | null }\r\n     */\r\n    private static _ttl: number | null = null;\r\n\r\n    /**\r\n     * Set the default item validity period in seconds.\r\n     *\r\n     * @param {number | null } value\r\n     */\r\n    static ttl(value: number | null) {\r\n        LocalStorage._ttl = value;\r\n    }\r\n\r\n    /**\r\n     * Set the key to the Storage object.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to create.\r\n     * @param { * } value Value you want to give the key you are creating.\r\n     * @param { number|null } ttl Item validity period in seconds.\r\n     */\r\n    static set(key: string, value: any, ttl: number | null = null): void {\r\n        ttl = ttl ?? LocalStorage._ttl;\r\n\r\n        const item: LocalStorageItem = {\r\n            data  : value instanceof Function ? value() : value,\r\n            expiry: ttl ? Date.now() + ttl * 1000 : null\r\n        };\r\n\r\n        localStorage.setItem(key, JSON.stringify(item));\r\n    }\r\n\r\n    /**\r\n     * Get the key from the Storage object.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to create.\r\n     * @param { string | Function | null } fallback String containing the fallback value.\r\n     *\r\n     * @return { * }\r\n     */\r\n    static get(key: string, fallback: string | Function | null = null): any {\r\n        const storageItem: string | null = localStorage.getItem(key);\r\n\r\n        if (storageItem === null) {\r\n            return fallback instanceof Function ? fallback() : fallback ?? null;\r\n        }\r\n\r\n        try {\r\n            const item: LocalStorageItem = JSON.parse(storageItem);\r\n\r\n            if (item.expiry && Date.now() > item.expiry) {\r\n                LocalStorage.remove(key);\r\n\r\n                return null;\r\n            }\r\n\r\n            return item.data ?? item;\r\n        } catch (error) {\r\n            return storageItem;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the key from the Storage, or execute the given callback and store the result.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to create.\r\n     * @param { Function } callback Function you want to execute.\r\n     * @param { number | null } ttl Item validity period in seconds.\r\n     *\r\n     * @return { any }\r\n     */\r\n    static remember(key: string, callback: Function, ttl: number | null = null): any {\r\n        const item: string | null = LocalStorage.get(key);\r\n\r\n        if (item === null) {\r\n            LocalStorage.set(key, callback, ttl ?? LocalStorage._ttl);\r\n        }\r\n\r\n        return item ?? LocalStorage.get(key);\r\n    }\r\n\r\n    /**\r\n     * Retrieves all items from the Storage object.\r\n     *\r\n     * @return { object }\r\n     */\r\n    static all(): object {\r\n        const storage: object | any = { ...localStorage };\r\n\r\n        for (const item in storage) {\r\n            storage[item] = LocalStorage.get(item);\r\n        }\r\n\r\n        return storage;\r\n    }\r\n\r\n    /**\r\n     * Remove the key from the Storage object.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to delete.\r\n     */\r\n    static remove(key: string): void {\r\n        localStorage.removeItem(key);\r\n    }\r\n\r\n    /**\r\n     * Clear all keys stored in a given Storage object.\r\n     */\r\n    static clear(): void {\r\n        localStorage.clear();\r\n    }\r\n\r\n    /**\r\n     * Determine if the key exists in the Storage object.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to check against\r\n     *\r\n     * @return { boolean }\r\n     */\r\n    static has(key: string): boolean {\r\n        return !!LocalStorage.get(key);\r\n    }\r\n\r\n    /**\r\n     * Determine if any of the keys exists in the Storage object.\r\n     *\r\n     * @param { string | array } keys String containing the name of the key you want to check against\r\n     *\r\n     * @return { boolean }\r\n     */\r\n    static hasAny(keys: string | string[]): boolean {\r\n        keys = keys instanceof Array ? keys : [...arguments];\r\n\r\n        return keys.filter((key: string) => LocalStorage.has(key)).length > 0;\r\n    }\r\n\r\n    /**\r\n     * Determine if the Storage object is empty.\r\n     *\r\n     * @return { boolean }\r\n     */\r\n    static isEmpty(): boolean {\r\n        return Object.keys(LocalStorage.all()).length === 0;\r\n    }\r\n\r\n    /**\r\n     * Determine if the Storage object is not empty.\r\n     *\r\n     * @return { boolean }\r\n     */\r\n    static isNotEmpty(): boolean {\r\n        return !LocalStorage.isEmpty();\r\n    }\r\n\r\n    /**\r\n     * Retrieves all keys from the Storage object.\r\n     *\r\n     * @return { array }\r\n     */\r\n    static keys(): string[] {\r\n        return Object.keys(localStorage);\r\n    }\r\n\r\n    /**\r\n     * Returns the total number of items in the Storage object.\r\n     *\r\n     * @return { number }\r\n     */\r\n    static count(): number {\r\n        return localStorage.length;\r\n    }\r\n\r\n    /**\r\n     * Updates the item expiration time.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to update.\r\n     * @param { number | null } ttl Item validity period in seconds.\r\n     */\r\n    static touch(key: string, ttl: number | null = null): void {\r\n        const item = LocalStorage.get(key);\r\n\r\n        if (item === null) {\r\n            return;\r\n        }\r\n\r\n        LocalStorage.set(key, item, ttl ?? LocalStorage._ttl);\r\n    }\r\n\r\n    /**\r\n     * Returns the expiration date for a given key.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to check against\r\n     * @param { boolean } asDate If true, returns the expiration date as a Date object.\r\n     *\r\n     * @return { number | Date | null }\r\n     */\r\n    static expiry(key: string, asDate: boolean = false): number | Date | null {\r\n        const storageItem: string | null = localStorage.getItem(key);\r\n\r\n        if (storageItem === null) {\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            const item: LocalStorageItem | null = JSON.parse(storageItem);\r\n\r\n            if (!item?.hasOwnProperty('expiry') || item?.expiry === null) {\r\n                return null;\r\n            }\r\n\r\n            return asDate ? new Date(item.expiry) : item.expiry;\r\n        } catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Dump the key from the Storage object.\r\n     *\r\n     * @param { string } key String containing the name of the key you want to dump.\r\n     */\r\n    static dump(key: string): void {\r\n        console.log(LocalStorage.get(key));\r\n    }\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n    (window as any).LocalStorage = LocalStorage;\r\n}\r\n\r\nif (typeof global !== 'undefined') {\r\n    (global as any).LocalStorage = LocalStorage;\r\n}"],"names":[],"mappings":"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"}